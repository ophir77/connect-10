(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{rIuV:function(t,e,o){"use strict";o.r(e);var i=o("L2JU"),n=o("BcCH");function r(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,i)}return o}function s(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?r(Object(o),!0).forEach((function(e){a(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function a(t,e,o){return e in t?Object.defineProperty(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[e]=o,t}var l={components:{FileUploader:o("OjY7").a},data:function(){return{formData:{uuid:null,columns:[],updated:!1,uploaded:!1},formErrors:{},preRequisite:{items:[],options:[]},uploaderConfig:{allowedExtensions:["csv"],maxNoOfFiles:1},initialFormData:null,isLoading:!1}},computed:s({},Object(i.c)("config",["vars"])),methods:s(s({},Object(i.b)("common",["Store","Init"])),{},{submit:function(){var t=this;if(formUtil.isUnchanged(this.initialFormData,this.formData))return this.$toasted.info(this.$t("general.nothing_changed"),this.$toastConfig.info),!1;formUtil.confirmAction().then((function(e){e.value&&(t.isLoading=!0,t.Store(t.formData).then((function(e){t.$toasted.success(e.message,t.$toastConfig),t.clear(),t.isLoading=!1})).catch((function(e){t.isLoading=!1,t.formErrors=formUtil.handleErrors(e)})))}))},unsavedCheck:function(t){formUtil.unsavedCheckAlert(this.initialFormData,this.formData,t)},clear:function(){this.formData.uuid=null,this.preRequisite.items=[],this.preRequisite.options=[],this.formData.columns=[],this.formData.uploaded=!1,this.formData.updated=!1},handleFileUpload:function(t){if(t.uuid){this.formData.uuid=t.uuid,this.preRequisite.items=t.items,this.preRequisite.options=t.options;var e=t.items[0],o=Array.from(Object.keys(e),(function(t){return e[t]}));this.formData.columns=o.map((function(e,o){return{selected:t.options[o]}})),this.formData.uploaded=!0,this.formData.updated=!0}}}),mounted:function(){n.a.$off("ROUTE_LEAVING",this.unsavedCheck),n.a.$on("ROUTE_LEAVING",this.unsavedCheck),this.Init({url:"contacts/import/finish"})},destroyed:function(){n.a.$off("ROUTE_LEAVING",this.unsavedCheck)},beforeRouteLeave:function(t,e,o){n.a.$emit("ROUTE_LEAVING",o)}},u=o("KHd+"),c=Object(u.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("base-container",{attrs:{boxed:"","with-loader":"","is-loading":t.isLoading,"loader-color":t.vars.loaderColor}},[o("form",{on:{submit:function(e){return e.preventDefault(),t.submit(e)}}},[t.formData.uploaded?o("div",{staticClass:"mt-3"},[o("h5",{staticClass:"pb-4"},[t._v(t._s(t.$t("general.choose_columns")))]),t._v(" "),o("div",{staticClass:"row"},t._l(t.formData.columns,(function(e,i){return o("div",{staticClass:"col-12 col-md-3 mb-5"},[o("base-select",{attrs:{options:t.preRequisite.options,label:t.$t("general.column",{number:i+1}),error:t.formErrors["column"+i],"allow-empty":!1,disabled:t.isLoading},on:{"update:error":function(e){return t.$set(t.formErrors,"column"+i,e)}},model:{value:e.selected,callback:function(o){t.$set(e,"selected",o)},expression:"column.selected"}}),t._v(" "),o("h6",{staticClass:"small text-muted px-2 font-weight-bold"},[t._v("\n                        "+t._s(t.$t("general.sample"))+":\n\n                        "),o("span",{staticClass:"text-muted px-2 comma-list"},[t._l(t.preRequisite.items,(function(e){return[e[i]?o("span",[t._v(t._s(e[i]))]):t._e()]}))],2)])],1)})),0),t._v(" "),o("div",{staticClass:"form-footer"},[o("div",{staticClass:"right-side"},[o("base-button",{attrs:{type:"submit",design:"primary"}},[t._v(t._s(t.$t("global.import",{attribute:t.$t("contact.contacts")})))])],1)])]):o("div",{staticClass:"py-5"},[o("file-uploader",{attrs:{"name-label":"upload.file",options:t.uploaderConfig,multiple:!1,url:"/contacts/import/start","button-classes":"justify-content-center"},on:{updated:t.handleFileUpload}})],1)])])}),[],!1,null,null,null);e.default=c.exports}}]);
//# sourceMappingURL=import.js.map?id=c073be759b71d8a11685